# 웹 서버에 도착해 응답 데이터가 웹 브라우저로 돌아간다.

1. 서버의 개요
    - 요약
        - 클라이언트와 서버는 접속을 동작을 수행하고 접속을 기다리는 동작을 번갈아가면서 진행한다.
        - 클라이언트가 접속할 때마다 새로운 서버 프로그램을 작동해 서버 애플리케이션이 크라이언트와 1 대 1로 대화하는 방법을 선택하는 것이 일반적이다.
    - 내용
        
        - [서버의 개요](https://www.notion.so/5a768ba51f8a4dbd87df938834795f01)
        
2. 서버의 수신 동작
    - 요약
        - LAN을 흐르는 패킷의 신호는 디지털 데이터의 신호와 타이밍을 나타내는 클록 신호를 합성한 것이다. 패킷의 신호에서 클록 신호를 추출하고 클록 신호에서 타이밍을 계산하면 디지털 데이터로 변환할 수 있다.
        - TCP 담당 부분이 접속 패킷을 수신했을 때 동작은 IP 헤더를 검사하고, 조각 나누기에 의한 패킷의 분할이 있는지 조사하면 TCP 담당 부분 또는 UDP 담당 부분에 패킷을 건네준다.
        - TCP 담당 부분이 데이터 패킷을 수신했을 때 동작은 먼저 도착한 패킷의 정보로 해당하는 소켓을 찾고, 데이터 조각을 연결해 수신 버퍼에 보관 후, 클라이언트에게 ACK를 도될려 준다.
        - TCP 담당 부분의 연결 끊기 동작에서 웹의 경우 HTTP 프로토콜 버전에 따라 다르다. 그리고 어느 경우든지 연결 끊기 동작이 끝나면 잠시 기다렸다 소켓을 말소한다.
    - 내용
        
        - [서버의 수신 동작](https://www.notion.so/8fa7d7a91de64fa6921f47de4e9f9bcc)
        
3. 웹 서버 소프트웨어가 리퀘스트 메시지의 의미를 해석하여 요구에 응한다.
    - 요약
        - 리퀘스트 메시지에는 메소드라는 일종의 명령과 데이터 출처를 나타내는 URI라는 파일의 경로명이 쓰여 있으며 내용에 따라 데이터를 클라이언트에 반송한다. 메서드나 URI 내용에 따라 웹 서버 내부 동작이 달라진다.
        - 실제 디렉토리를 이용해 URI를 작성하게 되면 서버가 무방비 상태로 노출되어 위험하다. 그래서 실제 디렉토리가 아닌 가상 디렉토리로 URI을 사용한다.
        - 액세스 제어는 사전에 설정해 둔 조건에 해당하는지 조사하고 조건에 해당하는 경우 동작을 금지하거나 실행하는 기능이다.
    - 내용
        
        - [웹 서버 소프트웨어가 리퀘스트 메시지의 의미를 해석하여 요구에 응한다.](https://www.notion.so/c0307a078ec348e685636987cdd12d15)
        
4. 웹 브라우저가 응답 메시지를 받아 화면에 표시한다.
    - 요약
        - 웹에서 취급하는 데이터는 다양하고 종류에 따라 표시 방법이 다르므로 최초에 종류를 조사해야 한다. 응답 메시지 헤더에 포함되는 Content-Type을 이용해 판단하는 것이 원칙이다.
        - 다른 판단 근거를 사용해 종합적으로 데이터의 종류를 판단하는 경우도 있다. 요청한 파일의 확장자나 데이터 내용의 포맷 등에서 종합적으로 판단하는 방법이다.
        - 그리고 데이터의 종류에 따라 화면 표시의 프로그램을 호출해 데이터를 표시하면 된다.
    - 내용
        
        - [웹 브라우저가 응답 메시지를 받아 화면에 표시한다.](https://www.notion.so/4543e6348af542fbb8f87fffa304160b)
